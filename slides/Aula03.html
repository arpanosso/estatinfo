<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Estat√≠stica e Inform√°tica</title>
    <meta charset="utf-8" />
    <meta name="author" content="Alan Rodrigo Panosso alan.panosso@unesp.br" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Estat√≠stica e Inform√°tica
]
.subtitle[
## Aula 03 - Distribui√ß√£o de Frequ√™ncia
]
.author[
### Alan Rodrigo Panosso <a href="mailto:alan.panosso@unesp.br" class="email">alan.panosso@unesp.br</a>
]
.institute[
### Departamento de Ci√™ncias Exatas FCAV/UNESP
]
.date[
### (14-03-2024)
]

---





## Distribui√ß√£o de frequ√™ncia de uma vari√°vel

Quando analisamos uma vari√°vel aleat√≥ria (qualitativa ou quantitativa), deve-se conhecer a distribui√ß√£o de frequ√™ncia dessa vari√°vel por meio de suas poss√≠veis realiza√ß√µes (observa√ß√µes). 

Nesse sentido, o objetivo dessa aula ser√° apresentar as principais formas e visualiza√ß√£o gr√°fica de vari√°veis quali e quantitativas. 

**Exemplo:** Considerando os [dados_turmas.xlsx](https://arpanosso.github.io/estatinfo/data/dados_turmas.xlsx) amostrados das turmas de Estat√≠sticas temos:

&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/exemplo_dados.png" style=" display: block; margin-left: auto; margin-right: auto;width: 65%"&gt;&lt;/img&gt;



---
**Tamanho da Popula√ß√£o `\((N)\)`**

O tamanho da popula√ß√£o `\(N\)` √© o n√∫mero total dos elementos alvos da pesquisa. Muitas vezes n√£o conhecemos esse valor. 

Em nosso exemplo, poder√≠amos entender como `\(N\)` o n√∫mero de todos os alunos da Unesp que est√£o no segundo ano de sua gradua√ß√£o.

**Tamanho da amostra `\((n)\)`**

√â o n√∫mero total de registros de sua base de dados, ou seja o n√∫mero total de elementos amostrados da popula√ß√£o. O comando `glimpse` permite que veriquemos o tamanho do banco de dados em linhas (Rows - `\(n\)`) e colunas (Columns - vari√°veis). Onde `chr`  representa vari√°veis do tipo **strings**, ou seja textos e `dbl` representa vari√°veis num√©ricas.


```r
library(tidyverse) 
dados_turmas &lt;- readxl::read_xlsx("../data/dados_turmas.xlsx")
glimpse(dados_turmas) 
```

```
#&gt; Rows: 44
#&gt; Columns: 6
#&gt; $ id          [3m[38;5;246m&lt;dbl&gt;[39m[23m 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,‚Ä¶
#&gt; $ sexo        [3m[38;5;246m&lt;chr&gt;[39m[23m "F", "F", "F", "F", "M", "M", "M",‚Ä¶
#&gt; $ cor_cabelo  [3m[38;5;246m&lt;chr&gt;[39m[23m "CC", "CE", "CC", "CE", "CE", "CC"‚Ä¶
#&gt; $ grau_alcool [3m[38;5;246m&lt;dbl&gt;[39m[23m 4, 1, 2, 3, 4, 2, 1, 2, 2, 4, 3, 3‚Ä¶
#&gt; $ altura      [3m[38;5;246m&lt;dbl&gt;[39m[23m 1.68, 1.59, 1.70, 1.50, 1.76, 1.60‚Ä¶
#&gt; $ idade_anos  [3m[38;5;246m&lt;dbl&gt;[39m[23m 19, 20, 49, 20, 23, 28, 19, 20, 20‚Ä¶
```


---
### Exemplo da base de dados das turmas 

Construir uma tabela de frequ√™ncias para a vari√°vel `sexo` contendo as frequ√™ncias absolutas `\((n_i)\)`, as frequ√™ncias relativas `\((f_i)\)` e a porcentagem `\((perc)\)` para as categoria existentes. 

Ap√≥s isso, realizar a visualiza√ß√£o de dados com gr√°ficos de Colunas, Barras e Setores (Pizza ou *Pie*).

Para essa tarefa, vamos utilizar o R. Precisaremos, ent√£o, fazer algumas opera√ß√µes nos dados das turmas e vamos usar o operador `PIPE` (`%&gt;%`) feito com o atalho `CTRL + SHIFT + M`. Vamos utilizar a fun√ß√£o `n()` para contar cada ocorr√™ncia das diferentes categorias de `sexo`



```r
tab &lt;- dados_turmas %&gt;%
*       group_by(sexo) %&gt;%
*       summarise(ni=n())
```

---

- `group_by()` a grupa as categorias da vari√°vel `sexo`.
- `summarise()` vai criar o resumo dos dados, ou seja, contar√° o valor de cada categoria usando a fun√ß√£o `n()` e salvar√° na coluna `ni`.


```r
tab
```

```
#&gt; # A tibble: 2 √ó 2
#&gt;   sexo     ni
#&gt;   &lt;chr&gt; &lt;int&gt;
#&gt; 1 F        15
#&gt; 2 M        29
```


---


```r
dados_turmas %&gt;% 
  arrange(sexo) 
```

```
#&gt; # A tibble: 44 √ó 6
#&gt;      id sexo  cor_cabelo grau_alcool altura idade_anos
#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
#&gt; 1     1 F     CC                   4   1.68         19
#&gt; 2     2 F     CE                   1   1.59         20
#&gt; 3     3 F     CC                   2   1.7          49
#&gt; 4     4 F     CE                   3   1.5          20
#&gt; 5    16 F     CE                   2   1.65         20
#&gt; # ‚Ñπ 39 more rows
```
---

### Frequ√™ncia Absoluta `\((n_i)\)`

√â definida como o n√∫mero de observa√ß√µes no conjunto de dados pertencentes √† uma categoria ou classe da vari√°vel em estudo.

Ent√£o temos:

`\(n_F = 30\)`

`\(n_M = 48\)`
 
Assim temos a primeira regra da an√°lise de nossa base de dados, a soma da frequ√™ncia absoluta das classes `\((k)\)` da vari√°vel ceteg√≥ria √© igual a `\(n\)`. 

$$
\sum \limits_{i=1}^{k}{n_i} = n
$$

Onde `\(k\)` √© o n√∫mero de categorias da vari√°vel em quest√£o, no caso do `sexo`, temos duas categorias (M e F).

$$
\sum \limits_{i=1}^{k}{n_i} = 30+48=78
$$

---

**Frequ√™ncia Relativa `\((f_i)\)`**

√â definida como a propor√ß√£o de cada categoria em rela√ß√£o ao **Total de observa√ß√µes** `\((n)\)`, ou seja:

$$
f_i = \frac{n_i}{n}
$$
Vamos, mais uma vez, utilizar o R para esses c√°lculos.



```r
dados_turmas %&gt;%
  group_by(sexo) %&gt;% 
  summarise(ni=n()) %&gt;%      
* mutate(fi = ni/sum(ni))
```

```
#&gt; # A tibble: 2 √ó 3
#&gt;   sexo     ni    fi
#&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;
#&gt; 1 F        15 0.341
#&gt; 2 M        29 0.659
```

`mutate()` permitir√° criarmos mais uma coluna na nossa tabela de resumo a partir da coluna `\(n_i\)`, no caso a frequ√™ncia relativa `\(f_i\)`.

---

Portanto temos que, 

$$
f_F = \frac{30}{78}=0,385
$$ 

e   

$$
f_M = \frac{48}{78}=0,615
$$

Assim, temos que a soma das frequ√™ncias relativas sempre ser√° igual a `\(1\)`: 

$$
\sum \limits_{i=1}^{k} f_i = 1
$$

onde `\(k\)` √© o n√∫mero de categorias da vari√°vel `sexo`, ou seja, `\(2\)`, nesse caso.

---

**Porcentagem de frequ√™ncia `\((perc \text{ ou %})\)`**

Definida como o resultado da multiplica√ß√£o da frequ√™ncia relativa (propor√ß√£o) por `\(100\)`.



```r
dados_turmas %&gt;%
  group_by(sexo) %&gt;% 
  summarise(ni=n()) %&gt;% # Frequ√™ncia Absoluta
  mutate(fi = ni/sum(ni),# Frequ√™ncia Relativa
*        perc = fi*100)
```

```
#&gt; # A tibble: 2 √ó 4
#&gt;   sexo     ni    fi  perc
#&gt;   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 F        15 0.341  34.1
#&gt; 2 M        29 0.659  65.9
```

A partir da tabela de frequ√™ncia, poderemos criar representa√ß√µes gr√°ficas que nos auxiliar√£o na apresenta√ß√£o e interpreta√ß√£o do comportamento dos dados.

Essa etapa √© a denominada de **Visualiza√ß√£o de Dados**. 

---
class: middle, center, inverse

# VISUALIZA√á√ÉO DE DADOS
## (Vari√°veis Qualitativas)

---
## Visualiza√ß√£o dos dados

Os tipos de gr√°ficos podem variar de acordo com o tipo de vari√°vel, geralmente, para as vari√°veis qualitativas utilizamos os gr√°ficos de `Barras`, `Colunas` ou de `Setores (Pizza ou Pie)`. 

Para isso, vamos utilizar a fun√ß√µes do pacote `ggplot2` que √© carregado junto com o pacote `tidyverse`. Observe que os gr√°ficos ser√£o constru√≠dos a partir do objeto `tab` anteriormente definido. 

O ggplot funciona na forma de camadas represeta√ß√µes gr√°ficas e de formata√ß√µes, que s√£o adicionadas de acordo com a necessidade do usu√°rio por meio do operador de adi√ß√£o `+` digitado ao final da cada linha.

---

**Gr√°fico de Colunas para Sexo**

Deve ser utilizado para vari√°veis categ√≥ricas (qualitativas ordinais ou nominais).


```r
dados_turmas %&gt;%
  group_by(sexo) %&gt;% 
  summarise(ni=n()) %&gt;% 
  mutate(fi = ni/sum(ni),
         perc = fi*100) %&gt;% 
  ggplot(aes(x=sexo, y=fi)) + 
  geom_col()
```

---

### Gr√°fico de Colunas para Sexo

&lt;img src="Aula03_files/figure-html/plot1-1.png" style="display: block; margin: auto;" /&gt;

---

### Gr√°fico de Barras para Sexo

Semelhante ao gr√°fico de colunas, contudo, com as barras na horizontal, facilita a leitura do nome das categorias.


```r
dados_turmas %&gt;%
  group_by(sexo) %&gt;% 
  summarise(ni=n()) %&gt;% 
  mutate(fi = ni/sum(ni),
         perc = fi*100) %&gt;% 
  ggplot(aes(x=fi,y=sexo)) + 
* geom_col(fill="aquamarine4",
*          color="black")
```
- o argumento `fill = "aquamarine4"` permite que possamos alterar a cor do preenchimeto (*fill*) da barra e o argumento `color="black"` permite a altera√ß√£o da cor o contorno das barras. 

---

&lt;img src="Aula03_files/figure-html/plot2-1.png" style="display: block; margin: auto;" /&gt;

Outras cores s√£o poss√≠veis tente algumas [das cores no R](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf).

---

### Gr√°fico de Setores para Sexo

Tamb√©m conhecido como gr√°fico de Pizza (ou torta em ingl√™s - *pie*), ele representa cada valor de frequ√™ncia relativa das diferentes categoras da vari√°vel em uma circunfer√™ncia.


```r
dados_turmas %&gt;%
  group_by(sexo) %&gt;% 
  summarise(ni=n()) %&gt;% 
  mutate(fi = ni/sum(ni),
         perc = fi*100) %&gt;% 
  ggplot(aes(x="",y=fi, fill=sexo)) + 
* geom_bar(stat="identity") +
* coord_polar("y", start=0) +
* theme_void()
```
- A fun√ß√£o `geom_bar()` associada √† `coord_polar()` permite a transforma√ß√£o do gr√°fico de barras no gr√°fico de pizza.

- A fun√ß√£o `theme_void()` retira elementos como linhas e nomes e n√∫meros da representa√ß√£o gr√°fica.

---

&lt;img src="Aula03_files/figure-html/plot3-1.png" style="display: block; margin: auto;" /&gt;

---
#### Vamos Adicionar os valores de `\(fi\)` no gr√°fico


```r
dados_turmas %&gt;%
  group_by(sexo) %&gt;% 
  summarise(ni=n()) %&gt;% 
  mutate(fi = ni/sum(ni),
         perc = fi*100) %&gt;%
  ggplot(aes(x="",y=fi, fill=sexo)) +
  geom_bar(stat="identity") +
  coord_polar("y", start=0) +
  theme_void() +
  geom_text(
    aes(
*     label=paste0(round(perc), "%")),
*     position=position_stack(vjust = 0.5))
```

---

&lt;img src="Aula03_files/figure-html/plot3_1-1.png" style="display: block; margin: auto;" /&gt;

---

## Tabela de Frequ√™ncia para a vari√°vel Cor de cabelo


Vamos, mais uma vez, utilizar o R para conseguirmos as tabelas e a representa√ß√£o gr√°fica. 


```r
dados_turmas %&gt;%
* group_by(cor_cabelo) %&gt;%
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100)      
```

```
#&gt; # A tibble: 4 √ó 4
#&gt;   cor_cabelo    ni     fi  perc
#&gt;   &lt;chr&gt;      &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 C              6 0.136  13.6 
#&gt; 2 CC             8 0.182  18.2 
#&gt; 3 CE            29 0.659  65.9 
#&gt; 4 P              1 0.0227  2.27
```

---

### Gr√°fico de Colunas para Cor de cabelo


```r
dados_turmas %&gt;%
* group_by(cor_cabelo) %&gt;%
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100) %&gt;% 
  ggplot(aes(x=cor_cabelo,y=fi,
*            fill=cor_cabelo)) +
  geom_col(color="black")+
* theme_bw()
```

- ao passarmos o argumento `fill=cor_cabelo` dentro da fun√ß√£o `aes()` estamos pedindo o mapeamento das cores de cabelo a partir de cores de preeenchimento diferentes.

- `aes()` representa a est√©tica do gr√°fico, ou seja, quem √© x, quem √© y e quem deve ser mapeado.

- a fun√ß√£o `theme_bw()` muda o padr√£o de cores e de linhas do gr√°fico. Existem outros padr√µes como `theme_classic`, `theme_minimal` entre outros.

---

&lt;img src="Aula03_files/figure-html/plot4-1.png" style="display: block; margin: auto;" /&gt;

---

### Gr√°fico de Barras para Cor de cabelo


```r
dados_turmas %&gt;%
* group_by(cor_cabelo) %&gt;%
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100) %&gt;% 
  ggplot(aes(x=fi, y=cor_cabelo,
             fill=cor_cabelo)) + 
  geom_col(color="black")+
  scale_fill_manual(values = c("salmon4",
                               "burlywood4",
                               "orange4",
                               "gold2",
                               "black"))+
  theme_minimal()
```
- utilize a fun√ß√£o `scale_fill_manual()` para alterar as cores dos preenchimentos, se necess√°rio.

---
&lt;img src="Aula03_files/figure-html/plot5-1.png" style="display: block; margin: auto;" /&gt;
---
### Gr√°fico de Setores para cor_cabelo


```r
dados_turmas %&gt;%
* group_by(cor_cabelo) %&gt;%
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100) %&gt;% 
  ggplot(aes(x="", y=fi, 
             fill=cor_cabelo)) + 
  geom_bar(stat="identity",color="black") +
  coord_polar("y", start=0) +
  theme_void()
```

---

&lt;img src="Aula03_files/figure-html/plot6-1.png" style="display: block; margin: auto;" /&gt;

---

#### Vamos Adicionar os valores de `\(perc\)` no gr√°fico


```r
dados_turmas %&gt;%
* group_by(cor_cabelo) %&gt;%
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100) %&gt;%
  ggplot(aes(x="",y=fi, fill=cor_cabelo)) +
  geom_bar(stat="identity") +
  coord_polar("y", start=0) +
  theme_void() +
  geom_text(
    aes(
*     label=paste0(round(perc), "%")),
*     position=position_stack(vjust = 0.5))
```

---

&lt;img src="Aula03_files/figure-html/plot6_1-1.png" style="display: block; margin: auto;" /&gt;

---
class: middle, center, inverse

# VISUALIZA√á√ÉO DE DADOS
###(Vari√°veis Quantitativas)

---
## Tabela de frequ√™ncia e visualiza√ß√£o para Idade em anos (discreta)

Quando a vari√°vel  for quantitativa discreta, os mesmos gr√°ficos de vari√°veis qualitativas podem ser utilizados. Por√©m, tamb√©m recomendamos a utiliza√ß√£o dos gr√°ficos `boxplot`, `histograma` e `Fun√ß√£o distribui√ß√£o acumulada`.

Pra a vari√°vel `idade_anos` vamos criar a tabela de frequ√™ncia;


```r
tab &lt;-dados_turmas %&gt;%
        group_by(idade_anos) %&gt;% 
        summarise(ni=n()) %&gt;%      
        mutate(fi = ni/sum(ni),    
             perc = fi*100)    
View(tab)
```


---


| idade_anos| ni|        fi|      perc|
|----------:|--:|---------:|---------:|
|         18|  6| 0.1363636| 13.636364|
|         19| 14| 0.3181818| 31.818182|
|         20|  9| 0.2045455| 20.454545|
|         21|  3| 0.0681818|  6.818182|
|         22|  3| 0.0681818|  6.818182|
|         23|  5| 0.1136364| 11.363636|
|         24|  1| 0.0227273|  2.272727|
|         27|  1| 0.0227273|  2.272727|
|         28|  1| 0.0227273|  2.272727|
|         49|  1| 0.0227273|  2.272727|

---
## Gr√°fico Boxplot

Conhecido como gr√°fico dos `\(5\)` n√∫meros representa um resumo dos valores *m√≠nimo*, *primeiro quartil*, *mediana*, *terceiro quartil* e *m√°ximo* de uma vari√°vel. √â  constru√≠do a partir de `geom_boxplot()`. 

Observe que dentro da fun√ß√£o `ggplot()` n√£o √© necess√°rio passar o `x`, somente √© atribu√≠do a `y` a vari√°vel discreta `idade_anos`.


```r
dados_turmas %&gt;% 
  ggplot(aes(y=idade_anos)) +
  geom_boxplot()
```

---

&lt;img src="Aula03_files/figure-html/plot7-1.png" style="display: block; margin: auto;" /&gt;

---
- O boxplot √© uma caixa que vai do 25¬∫ percentil ao 75¬∫ percentil da distribui√ß√£o, uma dist√¢ncia conhecida como a **amplitude interquartil** (IIQ). 
- No meio da caixa h√° uma linha que exibe a **mediana**, isto √©, 50¬∫ percentil, da distribui√ß√£o. Essas tr√™s linhas lhe d√£o um sentido da dispers√£o da distribui√ß√£o e se ela √© ou n√£o sim√©trica sobre a mediana ou enviesada para um lado.
- Pontos visuais que exibem observa√ß√µes s√£o aqueles que cairam em mais do que `\(1,5\)` vezes o IIQ de cada limite da caixa. Esses pontos fora da curva, denominados **outliers** s√£o incomuns, ent√£o s√£o plotados individualmente.
- Uma linha que se estende de cada lado da caixa e vai at√© o ponto mais distante da distribui√ß√£o que n√£o seja um valor incomum.


&lt;img src="Aula03_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;

---

Suas coordenadas podem ser transpostas trocando `y` por `x` no c√≥digo anterior e o tamanho da caixa, nesse caso, pode ser controlado por `coord_cartesian(ylim=c(-1,1))`. Utilize `fill` para controlar a cor de preenchimento da caixa, e as op√ß√µes `outlier.` para controlar tamanhos, formas, cores e preenchimentos dos outliers.


```r
dados_turmas %&gt;% 
  ggplot(aes(x=idade_anos)) +
  geom_boxplot(fill="orange",
               outlier.size = 4,
               outlier.shape = 21,
               outlier.color = "red",
               outlier.fill = "gray"
               )+
* coord_cartesian(ylim=c(-1,1))+
  theme_classic()
```

---

&lt;img src="Aula03_files/figure-html/plot8-1.png" style="display: block; margin: auto;" /&gt;

---

Outra alternativa para exibir a distribui√ß√£o de uma vari√°vel quantitativa, no exemplo `altura`, √© desmembr√°-la por uma vari√°vel categ√≥rica aqui no boxplot.


```r
dados_turmas %&gt;% 
  ggplot(aes(y=altura, 
*            fill=sexo)) +
  geom_boxplot()
```

Para fazer isso basta passarmos como preenchimento o nome da vari√°vel categ√≥rica, no exemplo, `sexo`.

---

&lt;img src="Aula03_files/figure-html/plot9-1.png" style="display: block; margin: auto;" /&gt;

---

## Tabela de frequ√™ncia para vari√°vel Altura (Quantitativa Cont√≠nua)

Quando a vari√°vel quantitativa for cont√≠nua, recomendamos a utiliza√ß√£o dos gr√°ficos `boxplot`, `histograma` e `Fun√ß√£o de distribui√ß√£o acumulada`. 

Devemos, inicialmente construir a tabela de frequ√™ncia da vari√°vel `altura`. Por√©m, os valores de uma vari√°vel cont√≠nua n√£o se repetem, mesmo que isso aparentemente ocorra na base de dados. 

Em teoria suas realiza√ß√µes podem assumir qualquer valor dentro da reta dos n√∫meros reais, portanto, ao mensurarmos uma vari√°vel cont√≠nua, temos apenas uma aproxima√ß√£o de seu verdadeiro valor dada pelo instrumento de medida.

---

Para exemplificar, vamos criar `\(5\)` classes de alturas a partir da fun√ß√£o `cut()`.


```r
tab &lt;-dados_turmas %&gt;%
  mutate(
*   classes_altura = cut(altura,5)
    ) %&gt;% 
  group_by(classes_altura) %&gt;% 
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100)    
View(tab)
```


|classes_altura | ni|        fi|      perc|
|:--------------|--:|---------:|---------:|
|(1.5,1.58]     |  4| 0.0909091|  9.090909|
|(1.58,1.66]    |  7| 0.1590909| 15.909091|
|(1.66,1.75]    | 12| 0.2727273| 27.272727|
|(1.75,1.83]    | 14| 0.3181818| 31.818182|
|(1.83,1.91]    |  7| 0.1590909| 15.909091|

---

### Amplitude Total

Para melhor entendermos como a fun√ß√£o `cut()` funciona, ser√° necess√°rio conhecermos mais algumas medidas para a constru√ß√£o do histograma. Vamos iniciar com a Amplitude total `\((\Delta)\)`, definida como a diferen√ßa entre o valor m√°ximo menos o valor m√≠nimo da vari√°vel.

`$$\Delta = M√°ximo - M√≠nimo$$`

Para os dados de altura temos, `\(\Delta = 1,93\;m-1,50\;m = 0,43 \;m\)`

No R podemos calcular a amplitude total com as fun√ß√µes do pacote `base`, para isso devemos, primeiramente, extrair de `dados_turmas` a vari√°vel (coluna) `altura` por meio do operador de acesso de listas `$`.


```r
altura &lt;- dados_turmas$altura
```

Agora vamos encontrar o m√°ximo e o m√≠nimo e calcular a diferen√ßa.


```r
D &lt;- max(altura) - min(altura)
D
```

```
#&gt; [1] 0.41
```

---
### N√∫mero de intervalos de classes `\((k)\)` 

Definiremos `\(k\)` como sendo o n√∫mero de **sub-intervalos** da Amplitude Total. Uma boa representa√ß√£o apresenta um `\(k\)` **NUNCA** inferior a `\(5\)` ou superior a `\(15\)`, pois com um pequeno n√∫mero de classes, perde-se informa√ß√£o, e com um grande n√∫mero de classes, o objetivo de resumir os dados fica prejudicado.



```r
k &lt;- 5
```


### Amplitude de classe `\((\Delta_i)\)`

√â o tamanho de cada um dos `\(k=5\)` sub-intervalos, dado pela amplitude total dividida pelo n√∫mero de intervalos.

`$$\Delta_i = \frac{\Delta}{k}$$`
Para os dados de altura:

`\(\Delta_i = \frac{\Delta}{k} = \frac{0.43\;m}{5} = 0,086 \;m\)`

---
Assim, temos


```r
Di = D/k
Di
```

```
#&gt; [1] 0.082
```
Cada um dos `\(5\)` intervalos ter√° uma amplitude de `\(0,086\)` m. Ou seja, o c√°lculo dos  limites das classes √© feito a partir da adi√ß√£o ao valor M√≠nimo o valor de `\(\Delta_i\)` `\(k\)` vezes:


```r
limites &lt;- min(altura)+ 0:k * Di
limites
```

```
#&gt; [1] 1.500 1.582 1.664 1.746 1.828 1.910
```

---

Obervem que foi essa a metodologia qua a fun√ß√£o `cut()` utilizou para calcular os limites de classes, e essa √© a metodologia cl√°ssica para lidar com dados cont√≠nuos e os agrupar em classes.


|classes_altura | ni|        fi|      perc|
|:--------------|--:|---------:|---------:|
|(1.5,1.58]     |  4| 0.0909091|  9.090909|
|(1.58,1.66]    |  7| 0.1590909| 15.909091|
|(1.66,1.75]    | 12| 0.2727273| 27.272727|
|(1.75,1.83]    | 14| 0.3181818| 31.818182|
|(1.83,1.91]    |  7| 0.1590909| 15.909091|

```
#&gt; [1] 1.500 1.582 1.664 1.746 1.828 1.910
```


---
## Gr√°fico histograma (frequ√™ncias absolutas)

A partir da tabela anterior, pode-se construir o gr√°fico de frequ√™ncia de cada classe de valor de altura, denominado **Histograma**. 


```r
dados_turmas %&gt;% 
* ggplot(aes(x=altura,y=..count..))+
  geom_histogram(breaks = limites,
                 color="black",
                 fill="gray")
```
O c√≥digo acima gera um histograma com `\(5\)` barras onde o eixo `y` ser√° a frequ√™ncia absoluta, ou seja, a contagem (`..count..`) de quantos valores de altura est√£o dentro de uma determinada classe.

A op√ß√£o `breaks = limites` deixa o histograma igual ao observado na tabela anterior.

---

## Histograma da altura (m)

&lt;img src="Aula03_files/figure-html/plot10-1.png" style="display: block; margin: auto;" /&gt;

---

## Gr√°fico histograma (frequ√™ncias relativas)

Ao longo de nosso curso, vamos estudar que a frequ√™ncia relativa `\(f_i\)` √© uma estimativa emp√≠rica da probabilidade `\(P(X=x_i)\)`, assim √© interessante que a √°rea total da figura do histograma seja igual a `\(1\)`, correspondendo √† soma total das frequ√™ncias relativas `\(( f_i )\)`. 

Ent√£o, para constru√ß√£o do histograma, sugere-se usar no eixo das ordenadas os valores de `\(fi / \Delta_i\)` (denominado densidade de frequ√™ncia), ou seja, da medida que indica qual a concentra√ß√£o por unidade da vari√°vel.


```r
dados_turmas %&gt;% 
* ggplot(aes(x=altura,y=..density..))+
  geom_histogram(breaks = limites,
                 color="black",
                 fill="gray")
```

Para isso utilizamos `y=..density..`.

---


&lt;img src="Aula03_files/figure-html/plot11-1.png" style="display: block; margin: auto;" /&gt;

---

## Densidade de frequ√™ncia `\((d_i)\)`

Agora vamos atualizar a tabela com o valor de densidade de frequ√™ncia, dado por:

`$$d_i=\frac{f_i}{\Delta_i}$$`


```r
tab &lt;-dados_turmas %&gt;%
  mutate(
    classes_altura = cut(altura,5)
    ) %&gt;% 
  group_by(classes_altura) %&gt;% 
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100,
*        di=fi/Di)
View(tab)
```

---


|classes_altura | ni|        fi|      perc|       di|
|:--------------|--:|---------:|---------:|--------:|
|(1.5,1.58]     |  4| 0.0909091|  9.090909| 1.108648|
|(1.58,1.66]    |  7| 0.1590909| 15.909091| 1.940133|
|(1.66,1.75]    | 12| 0.2727273| 27.272727| 3.325942|
|(1.75,1.83]    | 14| 0.3181818| 31.818182| 3.880266|
|(1.83,1.91]    |  7| 0.1590909| 15.909091| 1.940133|

---

## Medidas de Frequ√™ncias Acumuladas

As medidas acumuladas s√£o interessantes para compor algumas vizualiza√ß√µes:

`\(N_i\)`: Frequ√™ncia Absoluta Acumulada.

`\(F_i\)`: Frequ√™ncia Relativa Acumulada.

`\(Perc\)`: Porcentagem de Frequ√™ncia Acumulada.


```r
tab &lt;-dados_turmas %&gt;%
  mutate(
    classes_altura = cut(altura,5)
    ) %&gt;% 
  group_by(classes_altura) %&gt;% 
  summarise(ni=n()) %&gt;%      
  mutate(fi = ni/sum(ni),    
         perc = fi*100,
         di=fi/Di,
*        Ni = cumsum(ni),
*        Fi = cumsum(fi),
*        Perc = cumsum(perc))
View(tab)
```

---

# Tabela de Frequ√™ncia para Altura


|classes_altura | ni|        fi|      perc|       di| Ni|        Fi|       Perc|
|:--------------|--:|---------:|---------:|--------:|--:|---------:|----------:|
|(1.5,1.58]     |  4| 0.0909091|  9.090909| 1.108648|  4| 0.0909091|   9.090909|
|(1.58,1.66]    |  7| 0.1590909| 15.909091| 1.940133| 11| 0.2500000|  25.000000|
|(1.66,1.75]    | 12| 0.2727273| 27.272727| 3.325942| 23| 0.5227273|  52.272727|
|(1.75,1.83]    | 14| 0.3181818| 31.818182| 3.880266| 37| 0.8409091|  84.090909|
|(1.83,1.91]    |  7| 0.1590909| 15.909091| 1.940133| 44| 1.0000000| 100.000000|

---

## Histograma e Pol√≠gono de Frequ√™ncia

Obtemos o pol√≠gono de frequ√™ncias unindo por uma poligonal (segmentos de retas) os pontos correspondentes √†s frequ√™ncias, das classes, centradas nos pontos m√©dios de cada classe. 

Para se obter as interse√ß√µes do pol√≠gono com o eixo horizontal, cria-se em cada extremo do histograma uma classe com frequ√™ncia nula.

No R:


```r
dados_turmas %&gt;% 
* ggplot(aes(x=altura, y=..count..))+
  geom_histogram(breaks = limites,
                 color="black",
                 fill="gray") +
* geom_freqpoly(breaks=limites,color="red")
```
Observe que o histograma foi constru√≠do com as frequ√™ncias absolutas `\((n_i)\)`, ou seja, `y=..count..`.

---

&lt;img src="Aula03_files/figure-html/plot12-1.png" style="display: block; margin: auto;" /&gt;


---

## Histograma e Estimativas de densidade suavizadas


Calcula e desenha a estimativa da densidade, que √© uma vers√£o suavizada do histograma. Esta √© uma alternativa √∫til para dados cont√≠nuos que v√™m de uma distribui√ß√£o suave subjacente. 


```r
dados_turmas %&gt;% 
* ggplot(aes(x=altura,y=..density..))+
  geom_histogram(breaks = limites,
                 color="black",
                 fill="white") +
  geom_density(color="red",
               fill="green",
*              alpha=0.05)
```

- Observe que o histograma foi constru√≠do com as frequ√™ncias absolutas `\((n_i)\)`, ou seja, `y=..density..`. Utilizamos a fun√ß√£o `geom_density()`.  
- O argumento `alpha=0.05` controla a transpar√™ncia do preenchimento. 

---

&lt;img src="Aula03_files/figure-html/plot12_1-1.png" style="display: block; margin: auto;" /&gt;


---

## Fun√ß√£o de Distribui√ß√£o Acumulada


A fun√ß√£o de distribui√ß√£o acumulada descreve como probabilidades s√£o associadas aos valores ou aos intervalos de valores de uma vari√°vel aleat√≥ria. Em outras palavras, ela representa a probabilidade de uma vari√°vel aleat√≥ria ser menor ou igual a um valor real qualquer `\(x\)`. 

$$
F(x) = P(X \leq x) \in [0,1].
$$

Para uma vari√°vel aleat√≥ria cont√≠nua (`altura`):

`\(\int \limits_{- \infty }^x f(x_i) dx\)`


```r
dados_turmas %&gt;% 
  ggplot(aes(x=altura))+ 
* stat_ecdf(geom = "line",color="red")
```

---

&lt;img src="Aula03_files/figure-html/plot13-1.png" style="display: block; margin: auto;" /&gt;

---

## Fun√ß√£o de Distribui√ß√£o Acumulada

No caso da vari√°vel aleat√≥ria discreta (`idade_anos`):

`\(F(x) = \sum \limits_{x_i&lt;x} f(x_i)\)`


```r
dados_turmas %&gt;% 
* ggplot(aes(x=idade_anos))+
  stat_ecdf(geom = "line",color="red")
```

---
&lt;img src="Aula03_files/figure-html/plot14-1.png" style="display: block; margin: auto;" /&gt;

---
class: middle, center, inverse

## Pr√°tica: Instala√ß√£o de Pacotes no R

![](img/pacotes_r.png)

[Link do Video](https://drive.google.com/drive/u/0/folders/1O-sGhicXs6unUY_y1JW8yKSHm76VVMCX)

---
**Pacote em R**

Um pacote √© uma cole√ß√£o de fun√ß√µes, exemplos e documenta√ß√£o. A funcionalidade de um pacote √© frequentemente focada em uma metodologia estat√≠stica especial" (**Everitt &amp; Hothorn**).


![](img/fig08.png)

Pacotes no R s√£o cole√ß√µes de fun√ß√µes, exemplos e documenta√ß√µes, que devem ser previamente instalados e alocados no ambiente pela fun√ß√£o `library`.

---
## Pacotes b√°sicos

Liste os pacotes carregados no ambiente com:


```r
(.packages())
```

```
#&gt;  [1] "lubridate" "forcats"   "stringr"   "dplyr"    
#&gt;  [5] "purrr"     "readr"     "tidyr"     "tibble"   
#&gt;  [9] "ggplot2"   "tidyverse" "stats"     "graphics" 
#&gt; [13] "grDevices" "utils"     "datasets"  "methods"  
#&gt; [17] "base"
```

O retorno da fun√ß√£o √© uma lista de nomes, `caracteres` (ou `strings`), na forma de um *objeto* denominado **vetor**. Observe que cada pacote (elemento) √© referenciado dentro do vetor por um √≠ndice, um n√∫mero inteiro `\([\;i\;]\)` apresentado entre colchetes **[i]**.

Carregue um pacote chamando a fun√ß√£o `library`.


```r
library(MASS)
```


---

Agora, liste novamente os pacotes e observe a diferen√ßa no retorno da fun√ß√£o.


```r
(.packages())
```

```
#&gt;  [1] "MASS"      "lubridate" "forcats"   "stringr"  
#&gt;  [5] "dplyr"     "purrr"     "readr"     "tidyr"    
#&gt;  [9] "tibble"    "ggplot2"   "tidyverse" "stats"    
#&gt; [13] "graphics"  "grDevices" "utils"     "datasets" 
#&gt; [17] "methods"   "base"
```

Observe que o pacote `MASS` agora est√° no ambiente de trabalho. 


---

### Instalando pacotes

Para a realiza√ß√£o de procedimentos estat√≠stico e manipula√ß√£o de arquivos durante o curso, ser√£o necess√°rios v√°rios pacotes que n√£o fazem parte do `base` do R, que dever√£o ser instalados.

**Utilizando a op√ß√£o** `Packages\Install\nome do pacote`

&lt;img src="img/install_pac.png" width="450px" style="display: block; margin: auto;" /&gt;


Instale os pacotes:  
 
 * `tidyverse`   
 * `agricolae`  

---
Os pacotes tamb√©m podem ser instalados a partir das linhas de comandos:


```r
install.packages("tidyverse")
install.packages("agricolae")
```


Agora podemos carregar esses pacotes em nosso ambiente de trabalho.


```r
library(tidyverse)
library(agricolae)
```

Vamos agora criar uma "Pipe Line" para visualiza√ß√£o de um banco de dados


```r
mtcars %&gt;% 
  glimpse()
```

```
#&gt; Rows: 32
#&gt; Columns: 11
#&gt; $ mpg  &lt;dbl&gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3,‚Ä¶
#&gt; $ cyl  &lt;dbl&gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8,‚Ä¶
#&gt; $ disp &lt;dbl&gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0,‚Ä¶
#&gt; $ hp   &lt;dbl&gt; 110, 110, 93, 110, 175, 105, 245, 62, 95,‚Ä¶
#&gt; $ drat &lt;dbl&gt; 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21,‚Ä¶
#&gt; $ wt   &lt;dbl&gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460,‚Ä¶
#&gt; $ qsec &lt;dbl&gt; 16.46, 17.02, 18.61, 19.44, 17.02, 20.22,‚Ä¶
#&gt; $ vs   &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0,‚Ä¶
#&gt; $ am   &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
#&gt; $ gear &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3,‚Ä¶
#&gt; $ carb &lt;dbl&gt; 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3,‚Ä¶
```

O simbolo para opera√ß√£o de arquivos de dados √© o pipe `%&gt;%` que pode ser criado a partir do atalho `CTRL + SHIFT + M`

---

## Carregando os dados no R
Para carregar o banco de dados da turma no R, siga os passos:  
1.Fa√ßa o Download dos [dados_turmas.xlsx](https://arpanosso.github.io/estatinfo/data/dados_turmas.xlsx).    

2.Salve em uma pasta `data` dentro de um projeto do R previamente criado.

&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/download_.png" style=" display: block; margin-left: auto; margin-right: auto;width: 85%"&gt;&lt;/img&gt; 

---

3.Na aba **Environment** do RStudio selecione **Import Dataset/From Excel...** como apresentado abaixo.

&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/importa_r.png" style=" display: block; margin-left: auto; margin-right: auto;width: 95%"&gt;&lt;/img&gt; ]

---

4.Selecione **Browse** (destacado em vermelho no canto direito superior).

&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/importa_r1.png" style=" display: block; margin-left: auto; margin-right: auto;width: 95%"&gt;&lt;/img&gt; 

---

5.Na pr√≥xima janela busque o arquivo da base de dados **dados_turmas.xlsx** que salvamos na pasta "*data"*,  selecione o arquivo e clique em **Open**.

&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/importa_r2.png" style=" display: block; margin-left: auto; margin-right: auto;width: 95%"&gt;&lt;/img&gt;

---
6.Na janela ser√£o apresentados os dados, **N√ÉO CLIQUE EM IMPORT**, ao inv√©s disso, **selecione e copie o c√≥digo** para a importa√ß√£o dos dados. Ap√≥s isso **CLIQUE EM CANCEL**. 

&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/importa_r3.png" style=" display: block; margin-left: auto; margin-right: auto;width: 95%"&gt;&lt;/img&gt;

---

7.Cole o c√≥digo no seu script do R e o execute. Os dados ser√£o salvos no objeto `dados_turmas`. Se necess√°rio, instale o pacote `readxl` com as op√ß√µes da aba **Packages/Install** ou com o comando `install.packages("readxl")`.


```r
library(readxl)
dados_turmas &lt;- read_excel("data/dados_turmas.xlsx")
View(dados_turmas)
```



&lt;img src="https://arpanosso.github.io/estatinfo/slides/img/importa_r4.png" style=" display: block; margin-left: auto; margin-right: auto;width: 60%"&gt;&lt;/img&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
